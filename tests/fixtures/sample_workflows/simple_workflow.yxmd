<?xml version="1.0"?>
<AlteryxDocument yxmdVer="2023.1">
  <Properties>
    <MetaInfo>
      <AlteryxVersion>2023.1.1.123</AlteryxVersion>
      <Name>Simple_Test_Workflow</Name>
    </MetaInfo>
  </Properties>
  <Nodes>
    <!-- Container: mod_test -->
    <Node ToolID="100">
      <GuiSettings Plugin="AlteryxGuiToolkit.ToolContainer.ToolContainer">
        <Position x="100" y="100" width="800" height="600" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Caption>mod_test</Caption>
          <Disabled>False</Disabled>
        </Configuration>
      </Properties>
      <Annotation>
        <Name>mod_test</Name>
      </Annotation>
    </Node>

    <!-- TextInput Tool -->
    <Node ToolID="1">
      <GuiSettings Plugin="AlteryxBasePluginsGui.TextInput.TextInput">
        <Position x="150" y="200" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Field name="Name" type="V_WString" size="100" />
          <Field name="Value" type="Int32" />
          <Field name="Category" type="V_WString" size="50" />
          <Row Name="Alice" Value="10" Category="A" />
          <Row Name="Bob" Value="20" Category="B" />
          <Row Name="Charlie" Value="30" Category="A" />
          <Row Name="Diana" Value="15" Category="B" />
        </Configuration>
      </Properties>
      <Annotation>
        <Name>Test Data</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>

    <!-- Filter Tool -->
    <Node ToolID="2">
      <GuiSettings Plugin="AlteryxBasePluginsGui.Filter.Filter">
        <Position x="300" y="200" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <Expression>[Category] = "A"</Expression>
          <Mode>Custom</Mode>
        </Configuration>
      </Properties>
      <Annotation>
        <Name>Filter Category A</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>

    <!-- Formula Tool -->
    <Node ToolID="3">
      <GuiSettings Plugin="AlteryxBasePluginsGui.Formula.Formula">
        <Position x="450" y="200" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <FormulaField field="DoubleValue" type="Int32" expression="[Value] * 2" />
          <FormulaField field="Label" type="V_WString" expression='IF [Value] &gt; 20 THEN "High" ELSE "Low" ENDIF' />
        </Configuration>
      </Properties>
      <Annotation>
        <Name>Calculate Fields</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>

    <!-- Select Tool -->
    <Node ToolID="4">
      <GuiSettings Plugin="AlteryxBasePluginsGui.AlteryxSelect.AlteryxSelect">
        <Position x="600" y="200" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <SelectField field="Name" selected="True" rename="FullName" />
          <SelectField field="Value" selected="True" />
          <SelectField field="DoubleValue" selected="True" />
          <SelectField field="Label" selected="True" />
          <SelectField field="Category" selected="False" />
        </Configuration>
      </Properties>
      <Annotation>
        <Name>Select Output Columns</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>

    <!-- Sort Tool -->
    <Node ToolID="5">
      <GuiSettings Plugin="AlteryxBasePluginsGui.Sort.Sort">
        <Position x="750" y="200" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <SortInfo>
            <Field field="Value" order="Descending" />
          </SortInfo>
        </Configuration>
      </Properties>
      <Annotation>
        <Name>Sort by Value</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>

    <!-- Browse Tool (sink) -->
    <Node ToolID="6">
      <GuiSettings Plugin="AlteryxBasePluginsGui.Browse.Browse">
        <Position x="900" y="200" />
      </GuiSettings>
      <Properties>
        <Configuration />
      </Properties>
      <Annotation>
        <Name>Browse Results</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>

    <!-- External Input Tool (outside container) -->
    <Node ToolID="50">
      <GuiSettings Plugin="AlteryxBasePluginsGui.DbFileInput.DbFileInput">
        <Position x="50" y="400" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <TableName>dbo.external_table</TableName>
        </Configuration>
      </Properties>
      <Annotation>
        <Name>External Data</Name>
      </Annotation>
    </Node>

    <!-- Join Tool (inside container, joins TextInput with external) -->
    <Node ToolID="7">
      <GuiSettings Plugin="AlteryxBasePluginsGui.Join.Join">
        <Position x="300" y="350" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <JoinByPosition>False</JoinByPosition>
          <JoinInfo connection="Left">
            <Field field="Name" />
          </JoinInfo>
          <JoinInfo connection="Right">
            <Field field="person_name" />
          </JoinInfo>
        </Configuration>
      </Properties>
      <Annotation>
        <Name>Join with External</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>

    <!-- Summarize Tool -->
    <Node ToolID="8">
      <GuiSettings Plugin="AlteryxBasePluginsGui.Summarize.Summarize">
        <Position x="450" y="350" />
      </GuiSettings>
      <Properties>
        <Configuration>
          <SummarizeField field="Category" action="GroupBy" rename="Category" />
          <SummarizeField field="Value" action="Sum" rename="TotalValue" />
          <SummarizeField field="Value" action="Count" rename="RecordCount" />
        </Configuration>
      </Properties>
      <Annotation>
        <Name>Summarize by Category</Name>
        <ChildOf>100</ChildOf>
      </Annotation>
    </Node>
  </Nodes>

  <Connections>
    <!-- TextInput -> Filter -->
    <Connection>
      <Origin ToolID="1" Connection="Output" />
      <Destination ToolID="2" Connection="Input" />
    </Connection>
    <!-- Filter (True) -> Formula -->
    <Connection>
      <Origin ToolID="2" Connection="True" />
      <Destination ToolID="3" Connection="Input" />
    </Connection>
    <!-- Formula -> Select -->
    <Connection>
      <Origin ToolID="3" Connection="Output" />
      <Destination ToolID="4" Connection="Input" />
    </Connection>
    <!-- Select -> Sort -->
    <Connection>
      <Origin ToolID="4" Connection="Output" />
      <Destination ToolID="5" Connection="Input" />
    </Connection>
    <!-- Sort -> Browse -->
    <Connection>
      <Origin ToolID="5" Connection="Output" />
      <Destination ToolID="6" Connection="Input" />
    </Connection>
    <!-- External -> Join (Right) -->
    <Connection>
      <Origin ToolID="50" Connection="Output" />
      <Destination ToolID="7" Connection="Right" />
    </Connection>
    <!-- TextInput -> Join (Left) -->
    <Connection>
      <Origin ToolID="1" Connection="Output" />
      <Destination ToolID="7" Connection="Left" />
    </Connection>
    <!-- Join -> Summarize -->
    <Connection>
      <Origin ToolID="7" Connection="Join" />
      <Destination ToolID="8" Connection="Input" />
    </Connection>
  </Connections>
</AlteryxDocument>
